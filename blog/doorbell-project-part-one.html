<!doctype html>
<html lang="en">
		<head>
				<meta name="viewport" content="width=device-width, initial-scale=1.0" />
				<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
				<link rel="preconnect" href="https://fonts.googleapis.com">
				<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
				<link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
				<link rel="stylesheet" href="../css/global.css">
				<meta charset="utf-8">
				<title>itshe.dog | Doorbell project part 1</title>
		</head>
		<body class="bg-slate-950 flex items-center justify-center">
				<div class="container w-2xl mt-8 bg-violet-950 shadow-2xl">
						<header class="w-full text-2xl p-4 flex items-center justify-between bg-violet-600">
								<h1 class="font-semibold text-white">
										Itchydog's Borzoi Enclosure
								</h1>
								<div class="links text-sm">
										<a class="text-gray-300 mr-4 hover:text-pink-300" href="">home</a>
										<a class="text-gray-300 mr-4 hover:text-pink-300" href="">blog</a>
										<a class="text-gray-300 hover:text-pink-300" href="">about</a>
								</div>
						</header>
						<div class="p-4 text-white text-justify font-light article mt-8">
								<p class="text-3xl font-bold uppercase">
									Doorbell project part 1	
								</p>
								<span>2025-03-19</span>
								<p class="text-white mt-6">
								Me and my wife have a problem, and that problem is our <i>doorbell.</i> We can't hear it at all when we sit in our room!
								It can get rather annoying at times, especially given that we get a lot of deliveries (food or me getting electronics.) and our packages often
								get sent to a post office, where we have to go to pick up our packages (it's mentally exhausting!)
								</p>
								<p class="text-white mt-6">
								Our doorbell is an old mechanism and we can't really replace it without contacting our landlord, and even if we did I don't think he would allow us.
								So, the best possible option here is to <i>use two wirelessly communicating microcontrollers, where one detects our doorbell ringing and the other one signals that to us, sitting in our cozy little room!</i>
								</p>
								<p class="text-white mt-6">
							It sounds like a cool (and useful!) little project. A lot of opportunities to learn since I've never done anything WI-FI related with microcontrollers, and my first
							thought was to get some <i>ESP32s</i>!	
								</p>
								<h3 class="text-xl font-bold uppercase mt-6">ESP32, how I fucking hate you</h3>
								<p class="text-white mt-2">
								For those unaware, ESP32s are *<b>THE</b>* microcontrollers for wireless (wi-fi or bluetooth) communication and IOT projects in general.
								They are (supposedly) easy to program, (supposedly) power-efficient, (supposedly) fast and (supposedly) reliable.
								</p>
								<p class="text-white mt-6">
								I quickly ordered some ESPs (ESP32-C mini to be exact) and a <i>vibration sensor</i> to detect vibrations in our doorbell's mechanism! I ran into
								some problems almost immediately while trying to extract MAC address of one of the ESPs.
								</p>
								<p class="text-white mt-6">
								I was using <b>Serial</b> to be able to print thingies to my serial monitor in *shudders* Arduino IDE and one of the ESPs I was using just... Didn't communicate back? It did work for <i>some</i> example projects, but didn't want to work with the one where I needed to extract its MAC address (it did however miracolously work two days later!)	
								</p>
								<p class="text-white mt-6">
								"Well, it's <i>whatever!</i>" I said. "I'll just set up some interrupts to test ESP-NOW communication!!". 
								</p>
								<p class="text-white mt-6">
								oh itchydog, you poor soul.
								</p>
								<h3 class="text-xl font-bold uppercase mt-6">May I interrupt you?</h3>
								<p class="text-white mt-2">
								I must say I have played around with many different microcontrollers, all kinds of AVRs, STM32, even WCH32! And working with all of them, specifically interrupts, was always extremely straightforward! Just enable interrupts, set up what kind of interrupts I want, enable them for specific pins and point them to an ISR!
								</p>
								<p class="text-white mt-6">
	I (stupidly) assumed it would be just as simple for ESP32s! So I did an extremely simple setup with a button connected to a pin that I attached an interrupt to and, behold!! 
								</p>
								<p class="text-white mt-6">
	IT WORKED!!........ Sometimes.. Very, uhh.. Very rarely.
								</p>
								<p class="text-white mt-6">
	Of course I assumed I did <i>something</i> wrong. I looked through my circuit and code, even tested the same setup with every single microcontroller I had to make sure I wasn't going insane, I even turned on my trusty oscilloscope to absolutely <b>MAKE SURE</b> everything is okay. AND IT WAS.
								</p>
								<p class="text-white mt-6">
								But for <b>SOME REASON</b> the ISR would get called only <i>sometimes</i> when I pressed the button. I was <b>beyound</b> confused.
								</p>
								
						</div>
						<footer class="p-4 text-white bg-violet-900 text-center mt-4 text-xs">
							fuck copyright (itchydog's website :3)
						</footer>

				</div>
		</body>
</html>
